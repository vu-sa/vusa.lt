<template>
  <audio ref="startFM">
    <source src="https://eteris.startfm.lt/startfm.mp3" />
  </audio>
  <NPopover>
    <template #trigger>
      <NButton text @click="toggleAudio">
        <template v-if="!audioPlaying" #icon
          ><NIcon :component="MusicNote2Play20Filled"></NIcon
        ></template>
        <template v-else #icon
          ><NIcon :component="Pause24Regular"></NIcon
        ></template>
      </NButton>
    </template>
    Klausykis studenti≈°ko
    <a
      class="font-bold transition hover:text-vusa-red"
      href="https://startfm.lt"
      target="_blank"
      >START FM</a
    >
    radijo!
  </NPopover>
</template>

<script setup lang="ts">
import { MusicNote2Play20Filled, Pause24Regular } from "@vicons/fluent";
import { NButton, NIcon, NPopover } from "naive-ui";
import { ref } from "vue";

const startFM = ref<HTMLAudioElement>();
const audioPlaying = ref(false);

const toggleAudio = () => {
  if (startFM.value?.paused) {
    startFM.value?.play();
    audioPlaying.value = true;
  } else {
    startFM.value?.pause();
    audioPlaying.value = false;
  }
};
</script>

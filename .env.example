# =============================================================================
# VU SA Environment Configuration
# =============================================================================
# This file serves as the template for both local development and staging.
#
# ENVIRONMENT TYPES:
#   local    - Local development with Docker/Sail
#   staging  - Staging server at naujas.vusa.lt (subdomains: {tenant}.naujas.vusa.lt)
#   production - Production server at vusa.lt
#
# SETUP:
#   1. Copy this file to .env
#   2. Run: php artisan key:generate (or ./vendor/bin/sail artisan key:generate)
#   3. Adjust values based on your environment (see STAGING notes below)
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME="VU SA"
APP_ENV=local
APP_KEY=
# STAGING: Run `php artisan key:generate` on the staging server
APP_DEBUG=true
APP_URL=http://www.vusa.test
# STAGING: APP_URL=https://www.naujas.vusa.lt

# =============================================================================
# Staging Access Protection (only used when APP_ENV=staging)
# =============================================================================
# HTTP Basic Auth credentials to protect the staging site from public access
STAGING_USER=
STAGING_PASSWORD=

# =============================================================================
# Database Configuration
# =============================================================================
DB_CONNECTION=mysql
DB_HOST=mariadb
# STAGING: DB_HOST=127.0.0.1 (or your database server IP)
DB_PORT=3306
DB_DATABASE=vusa
DB_USERNAME=root
DB_PASSWORD=root

# =============================================================================
# Mail Configuration
# =============================================================================
MAIL_MAILER=smtp
MAIL_HOST=mailpit
# STAGING: Use actual SMTP server (e.g., MAIL_HOST=smtp.example.com)
MAIL_PORT=1025
# STAGING: MAIL_PORT=587
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
# STAGING: MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=vusa@vusa.lt
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# PWA Push Notifications (Web Push / VAPID)
# =============================================================================
# Generate keys with: php artisan webpush:vapid
# VAPID_SUBJECT should be mailto: or https:// URL identifying the server
VAPID_SUBJECT=mailto:it@vusa.lt
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# =============================================================================
# Queue & Cache Configuration
# =============================================================================
QUEUE_CONNECTION=sync
CACHE_DRIVER=redis
SESSION_DRIVER=redis

# =============================================================================
# Redis Configuration
# =============================================================================
# STAGING: Use different DB numbers to avoid cache conflicts with production
#   Production: REDIS_DB=0, REDIS_CACHE_DB=1
#   Staging:    REDIS_DB=2, REDIS_CACHE_DB=3
# STAGING: REDIS_HOST=127.0.0.1 (for server) or keep 'redis' for Docker
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
# STAGING: Add REDIS_PREFIX=vusa_staging_ to namespace keys

# =============================================================================
# Session Configuration
# =============================================================================
# The session domain must match your development domain for cookies to work
# across subdomains (e.g., mif.vusa.test shares cookies with www.vusa.test)
SESSION_DOMAIN=".vusa.test"
# STAGING: SESSION_DOMAIN=".naujas.vusa.lt"
# STAGING: Add SESSION_SECURE_COOKIE=true (HTTPS required)

# =============================================================================
# Microsoft OAuth Configuration
# =============================================================================
# Register your app at https://portal.azure.com
# STAGING: Add https://www.naujas.vusa.lt/auth/microsoft/callback as redirect URI
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_REDIRECT_URI=http://localhost/auth/microsoft/callback
# STAGING: MICROSOFT_REDIRECT_URI=https://www.naujas.vusa.lt/auth/microsoft/callback

# =============================================================================
# Pusher / WebSockets Configuration
# =============================================================================
PUSHER_APP_ID=someID
PUSHER_APP_KEY=someKEY
PUSHER_APP_SECRET=someSECRET
PUSHER_HOST=127.0.0.1
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# =============================================================================
# Scout / Search Configuration
# =============================================================================
# Default driver is 'database' - only specific models (like Document) use Typesense
SCOUT_DRIVER=database
# STAGING: Add SCOUT_PREFIX=staging_ to separate indexes from production

# Typesense Configuration (for models that explicitly use Typesense)
TYPESENSE_HOST=typesense
# STAGING: TYPESENSE_HOST=127.0.0.1
TYPESENSE_PORT=8108
TYPESENSE_PATH=
TYPESENSE_PROTOCOL=http
TYPESENSE_API_KEY=xyz
TYPESENSE_SEARCH_ONLY_KEY=

# =============================================================================
# SharePoint Configuration
# =============================================================================
# ⚠️  STAGING WARNING: SharePoint is shared with production!
# Set SHAREPOINT_READ_ONLY=true to prevent modifications in staging
SHAREPOINT_READ_ONLY=false
# STAGING: SHAREPOINT_READ_ONLY=true

SHAREPOINT_CLIENT_ID=12345678-1234-1234-1234-123456789abc
SHAREPOINT_CLIENT_SECRET=fake-client-secret-for-testing
SHAREPOINT_REDIRECT_URI=http://localhost/auth/microsoft/sharepoint/callback
# STAGING: SHAREPOINT_REDIRECT_URI=https://www.naujas.vusa.lt/auth/microsoft/sharepoint/callback
SHAREPOINT_TENANT_ID=12345678-1234-1234-1234-123456789abc

SHAREPOINT_ARCHIVE_DRIVE_ID=fake-archive-drive-id

# Test Drive ID and settings
SHAREPOINT_VUSA_DRIVE_ID="b!QF4zsh65ykCLc-6vvOkr4AP0wmTErtxEnKFUYKdmKJHD3vACCR_ITqyg65Cx24FO"
SHAREPOINT_SITE_ID=b2335e40-b91e-40ca-8b73-eeafbce92be0
SHAREPOINT_LIST_ID=02f0dec3-1f09-4ec8-aca0-eb90b1db814e

VITE_SHAREPOINT_CLIENT_ID=${SHAREPOINT_CLIENT_ID}
VITE_SHAREPOINT_TENANT_ID=${SHAREPOINT_TENANT_ID}

# =============================================================================
# File Storage Configuration
# =============================================================================
# ⚠️  STAGING WARNING: File storage (storage/app/public) may be shared with production!
# Set FILES_READ_ONLY=true to prevent file uploads, deletes, moves in staging
FILES_READ_ONLY=false
# STAGING: FILES_READ_ONLY=true

# =============================================================================
# Frontend Secrets (populated via GitHub Actions during build)
# =============================================================================
VITE_ARCHYVAS_PASSWORD=
VITE_ATSTOVAI_PASSWORD=
